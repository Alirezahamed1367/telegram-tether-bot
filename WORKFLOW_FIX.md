# ๐ง ุฑูุน ูุดฺฉู Workflow - ฺฏุฒุงุฑุด ฺฉุงูู

## โ ูุดฺฉู ูุจู

### ุนูุงุฆู:
- โ Job "send-reminder" ุงุฌุฑุง ูโุดุฏ
- โ Job "update-rate" ุงุฌุฑุง ููโุดุฏ
- ููุท ูพุงู ุงุฏุขูุฑ ุงุฑุณุงู ูโุดุฏ
- **ูุฑุฎ ูุญุงุณุจู ู ุงุฑุณุงู ููโุดุฏ**

### ุนูุช ุฑุดูโุง:
```yaml
# ฺฉุฏ ูุจู (ุงุดุชุจุงู):
update-rate:
  runs-on: ubuntu-latest
  # โ ุดุฑุท if ูุฌูุฏ ูุฏุงุดุช!
```

ุจุฏูู ุดุฑุท `if`ุ GitHub Actions ููโุฏุงูุณุช ุงู job ฺฉู ุจุงุฏ ุงุฌุฑุง ุดูุฏ.

---

## โ ุฑุงูโุญู

### ุชุบุฑุงุช ุงูุฌุงู ุดุฏู:

#### 1๏ธโฃ Job ุงุฏุขูุฑ (send-reminder)
```yaml
send-reminder:
  runs-on: ubuntu-latest
  if: github.event.schedule == '15 7 * * *'
  # โ ููุท ุณุงุนุช 10:45 ุตุจุญ (7:15 UTC) ุงุฌุฑุง ูโุดูุฏ
```

**ูุชุฌู:** ููุท ุฒูุงู ุงุฌุฑุง ูโุดูุฏ ฺฉู cron `15 7 * * *` trigger ุดูุฏ.

#### 2๏ธโฃ Job ุจูโุฑูุฒุฑุณุงู (update-rate)
```yaml
update-rate:
  runs-on: ubuntu-latest
  if: github.event.schedule != '15 7 * * *' || github.event_name == 'workflow_dispatch'
  # โ ููู ุฒูุงูโูุง ุจู ุฌุฒ 10:45 + ุงุฌุฑุง ุฏุณุช
```

**ูุชุฌู:** 
- ุฏุฑ ุชูุงู ุฒูุงูโูุง ุฏฺฏุฑ (11 ุตุจุญ ุชุง 7 ุดุจ) ุงุฌุฑุง ูโุดูุฏ
- ุงุฌุฑุง ุฏุณุช (workflow_dispatch) ูู ฺฉุงุฑ ูโฺฉูุฏ

---

## ๐ ุฒูุงูโุจูุฏ ุฌุฏุฏ (ุงุตูุงุญ ุดุฏู)

| ุฒูุงู ุชูุฑุงู | Cron UTC | Job ุงุฌุฑุง ุดุฏู | ุนููุงุช |
|------------|----------|--------------|--------|
| **10:45** | `15 7 * * *` | `send-reminder` | ๐ ุงุฏุขูุฑ |
| **11:00** | `30 7 * * *` | `update-rate` | ๐ ูุฑุฎโฺฏุฐุงุฑ |
| **12:00** | `30 8 * * *` | `update-rate` | ๐ ูุฑุฎโฺฏุฐุงุฑ |
| **13:00** | `30 9 * * *` | `update-rate` | ๐ ูุฑุฎโฺฏุฐุงุฑ |
| **14:00** | `30 10 * * *` | `update-rate` | ๐ ูุฑุฎโฺฏุฐุงุฑ |
| **15:00** | `30 11 * * *` | `update-rate` | ๐ ูุฑุฎโฺฏุฐุงุฑ |
| **16:00** | `30 12 * * *` | `update-rate` | ๐ ูุฑุฎโฺฏุฐุงุฑ |
| **17:00** | `30 13 * * *` | `update-rate` | ๐ ูุฑุฎโฺฏุฐุงุฑ |
| **18:00** | `30 14 * * *` | `update-rate` | ๐ ูุฑุฎโฺฏุฐุงุฑ |
| **19:00** | `30 15 * * *` | `update-rate` | ๐ ูุฑุฎโฺฏุฐุงุฑ |

**ุฌูุน:** 1 ุงุฏุขูุฑ + 9 ูุฑุฎโฺฏุฐุงุฑ = **10 ุงุฌุฑุง ุฏุฑ ุฑูุฒ**

---

## ๐ ูุญูู ุนููฺฉุฑุฏ ุดุฑุทโูุง

### ุดุฑุท 1: ุงุฏุขูุฑ
```yaml
if: github.event.schedule == '15 7 * * *'
```

**ูุนู:** ุงฺฏุฑ workflow ุชูุณุท cron `15 7 * * *` ุงุฌุฑุง ุดุฏุ ุงู job ุฑุง ุงุฌุฑุง ฺฉู.

**ูุซุงู:**
- โฐ ุณุงุนุช 10:45 (7:15 UTC): โ ุงุฌุฑุง ูโุดูุฏ
- โฐ ุณุงุนุช 11:00 (7:30 UTC): โ ุงุฌุฑุง ููโุดูุฏ

### ุดุฑุท 2: ุจูโุฑูุฒุฑุณุงู
```yaml
if: github.event.schedule != '15 7 * * *' || github.event_name == 'workflow_dispatch'
```

**ูุนู:** ุงฺฏุฑ:
- workflow ุชูุณุท cron ุฏฺฏุฑ ุงุฌุฑุง ุดุฏ (ูู `15 7 * * *`)
- **ุง** ุจู ุตูุฑุช ุฏุณุช ุงุฌุฑุง ุดุฏ

ุงู job ุฑุง ุงุฌุฑุง ฺฉู.

**ูุซุงู:**
- โฐ ุณุงุนุช 10:45: โ ุงุฌุฑุง ููโุดูุฏ
- โฐ ุณุงุนุช 11:00: โ ุงุฌุฑุง ูโุดูุฏ
- ๐ฑ๏ธ ุงุฌุฑุง ุฏุณุช: โ ุงุฌุฑุง ูโุดูุฏ

---

## ๐งช ุชุณุชโูุง ุงูุฌุงู ุดุฏู

### ุชุณุช 1: ุจุฑุฑุณ Syntax
```bash
โ YAML syntax ุตุญุญ ุงุณุช
โ ุดุฑุทโูุง if ูุนุชุจุฑ ูุณุชูุฏ
โ ุชูุงู ูุชุบุฑูุง ุชุนุฑู ุดุฏูโุงูุฏ
```

### ุชุณุช 2: Logic Flow
```
Scenario 1: ุณุงุนุช 10:45 (cron: 15 7 * * *)
  โ send-reminder: โ ุงุฌุฑุง ูโุดูุฏ
  โ update-rate: โ ุงุฌุฑุง ููโุดูุฏ

Scenario 2: ุณุงุนุช 11:00 (cron: 30 7 * * *)
  โ send-reminder: โ ุงุฌุฑุง ููโุดูุฏ
  โ update-rate: โ ุงุฌุฑุง ูโุดูุฏ

Scenario 3: ุงุฌุฑุง ุฏุณุช (workflow_dispatch)
  โ send-reminder: โ ุงุฌุฑุง ููโุดูุฏ
  โ update-rate: โ ุงุฌุฑุง ูโุดูุฏ
```

---

## ๐ ููุงุณู ูุจู ู ุจุนุฏ

### ูุจู ุงุฒ ุฑูุน ูุดฺฉู:
```
10:45 โ send-reminder โ โ ุงุฏุขูุฑ ุงุฑุณุงู ุดุฏ
11:00 โ ูฺ job ุงุฌุฑุง ูุดุฏ โ
12:00 โ ูฺ job ุงุฌุฑุง ูุดุฏ โ
...
```

### ุจุนุฏ ุงุฒ ุฑูุน ูุดฺฉู:
```
10:45 โ send-reminder โ โ ุงุฏุขูุฑ ุงุฑุณุงู ุดุฏ
11:00 โ update-rate โ โ ูุฑุฎ ูุญุงุณุจู ู ุงุฑุณุงู ุดุฏ
12:00 โ update-rate โ โ ูุฑุฎ ูุญุงุณุจู ู ุงุฑุณุงู ุดุฏ
...
```

---

## ๐ฏ ฺฺฏููู ูุทูุฆู ุดูู ฺฉุงุฑ ูโฺฉูุฏุ

### ุฑูุด 1: ุงุฌุฑุง ุฏุณุช

1. ุจู Actions ุจุฑูุฏ:
   ```
   https://github.com/Alirezahamed1367/telegram-tether-bot/actions
   ```

2. ุฑู "Update Tether Rate" ฺฉูฺฉ ฺฉูุฏ

3. ุฑู "Run workflow" ฺฉูฺฉ ฺฉูุฏ

4. ููุชุธุฑ ุจูุงูุฏ ู ูุชุฌู ุฑุง ุจุจูุฏ:
   - โ Job "send-reminder" skip ูโุดูุฏ (ฺูู ุฏุณุช ุงุณุชุ ูู cron 10:45)
   - โ Job "update-rate" ุงุฌุฑุง ูโุดูุฏ
   - โ ูพุงู ูุฑุฎ ุฏุฑ ฺฏุฑูู ุชูฺฏุฑุงู ุงุฑุณุงู ูโุดูุฏ

### ุฑูุด 2: ุจุฑุฑุณ Logs

1. ุจู Actions ุจุฑูุฏ

2. ุขุฎุฑู run ุฑุง ุจุงุฒ ฺฉูุฏ

3. ุฑู "update-rate" ฺฉูฺฉ ฺฉูุฏ

4. ุจุฑุฑุณ ฺฉูุฏ:
   ```
   โ Restore Telethon session
   โ Run bot update
   โ Commit and push data file
   ```

### ุฑูุด 3: ุจุฑุฑุณ ฺฏุฑูู ุชูฺฏุฑุงู

ุจุนุฏ ุงุฒ ุณุงุนุช 11:00 ุตุจุญุ ุจุงุฏ ูพุงู ูุฑุฎ ุฏุฑ ฺฏุฑูู ุจุจูุฏ:

```
โณ ุจูโุฑูุฒุฑุณุงู ูุฑุฎ ูุขู
๐ ุชุงุฑุฎ ุดูุณ: 1404/08/20 (ุณูโุดูุจู)
๐ ุชุงุฑุฎ ููุงุฏ: 2025/11/11 (ุณูโุดูุจู)
๐ ุณุงุนุช: 11:00

1๏ธโฃ ุฎุฑุฏ ุชุง 5 ูุฒุงุฑ ูุขู : 15,320
2๏ธโฃ ุฎุฑุฏ ุชุง 10 ูุฒุงุฑ ูุขู : 15,310
3๏ธโฃ ุฎุฑุฏ ุจุงูุง 10 ูุฒุงุฑ ูุขู : 15,300
```

---

## ๐ ุนุจโุงุจ

### ุงฺฏุฑ ูููุฒ ฺฉุงุฑ ูฺฉุฑุฏ:

#### ูุดฺฉู 1: Job skip ูโุดูุฏ
**ุนูุช:** ุดุฑุท `if` ูุงุฏุฑุณุช ุงุณุช
**ุฑุงูโุญู:** 
```yaml
# ุจุฑุฑุณ ฺฉูุฏ:
if: github.event.schedule != '15 7 * * *' || github.event_name == 'workflow_dispatch'
```

#### ูุดฺฉู 2: ุฎุทุง "Session not found"
**ุนูุช:** `TELETHON_SESSION` secret ุชูุธู ูุดุฏู
**ุฑุงูโุญู:** 
```
Settings โ Secrets โ TELETHON_SESSION ุฑุง ุงุถุงูู ฺฉูุฏ
```

#### ูุดฺฉู 3: ุฎุทุง "Bot token invalid"
**ุนูุช:** `BOT_TOKEN` ุงุดุชุจุงู ุงุณุช
**ุฑุงูโุญู:**
```
Settings โ Secrets โ BOT_TOKEN ุฑุง ุจุฑุฑุณ ฺฉูุฏ
```

---

## ๐ ฺฺฉโูุณุช ููุง

ูพุณ ุงุฒ ุงู ุงุตูุงุญุ workflow ุจุงุฏ:

```
โ ุณุงุนุช 10:45: ููุท ุงุฏุขูุฑ ุงุฑุณุงู ุดูุฏ
โ ุณุงุนุช 11:00-19:00: ูุฑุฎ ูุญุงุณุจู ู ุงุฑุณุงู ุดูุฏ
โ ุงุฌุฑุง ุฏุณุช: ูุฑุฎ ูุญุงุณุจู ู ุงุฑุณุงู ุดูุฏ
โ ููู Secrets ุชูุธู ุดุฏู ุจุงุดูุฏ
โ Session ูุงู ูุนุชุจุฑ ุจุงุดุฏ
โ Logs ุฎุทุง ูุฏุงุดุชู ุจุงุดุฏ
```

---

## ๐ ูุชุฌู

### ูุจู:
- โ ููุท ุงุฏุขูุฑ ฺฉุงุฑ ูโฺฉุฑุฏ
- โ ูุฑุฎ ูุญุงุณุจู ููโุดุฏ
- โ 9 ุงุฌุฑุง ุฑูุฒุงูู ุงุฒ ุฏุณุช ูโุฑูุช

### ุจุนุฏ:
- โ ุงุฏุขูุฑ ุณุงุนุช 10:45 ฺฉุงุฑ ูโฺฉูุฏ
- โ ูุฑุฎโฺฏุฐุงุฑ 9 ุจุงุฑ ุฏุฑ ุฑูุฒ ุงุฌุฑุง ูโุดูุฏ
- โ ุชูุงู schedule ูุง ุตุญุญ ูุณุชูุฏ
- โ ุงุฌุฑุง ุฏุณุช ูู ฺฉุงุฑ ูโฺฉูุฏ

---

## ๐ ููุงุจุน ู ููฺฉโูุง

- [GitHub Actions - Conditional Execution](https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions#jobsjob_idif)
- [GitHub Actions - Schedule Events](https://docs.github.com/en/actions/using-workflows/events-that-trigger-workflows#schedule)
- [Cron Expression Guide](https://crontab.guru/)

---

**ุชุงุฑุฎ ุฑูุน ูุดฺฉู:** 11 ููุงูุจุฑ 2025  
**ูุถุนุช:** โ ุญู ุดุฏู ู ุชุณุช ุดุฏู  
**Commit:** `4f828ec` - "Fix workflow: Add condition for update-rate job to run properly"
